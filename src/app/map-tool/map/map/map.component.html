<div class="map-wrapper">
  <app-mapbox
      [mapConfig]="mapConfig" 
      [eventLayers]="mapEventLayers"
      (ready)="onMapReady($event)"
      (zoom)="onMapZoom($event)"
      (featureClick)="onFeatureClick($event)"
      (hoverChanged)="onFeatureHover($event)"
      (render)="onMapRender($event)"
      (moveEnd)="onMapMoveEnd($event)"
  >
  </app-mapbox>
</div>
<div class="map-ui-wrapper">
  <app-progress-bar *ngIf="mapLoading"></app-progress-bar>
  <div class="map-ui">
      <app-ui-select
          tabindex="4"
          class="eviction-select"
          label="Eviction"
          labelProperty="name"
          [selectedValue]="dataService.activeBubbleHighlight"
          [values]="dataService.bubbleAttributes"
          (change)="tmpSetBubble($event)"
      ></app-ui-select>
      <app-ui-select
          tabindex="5"
          class="highlight-select"
          label="Census Data"
          labelProperty="name"
          [values]="dataService.dataAttributes"
          (change)="tmpSetChoropleth($event)">
      </app-ui-select>
      <app-ui-select
          tabindex="6"
          class="layer-select"
          label="Map Level"
          labelProperty="name"
          [selectedValue]="dataService.activeDataLevel"
          [values]="selectDataLevels" 
          (change)="setGroupVisibility($event)">
      </app-ui-select>
      <div 
        *ngIf="dataService.activeDataHighlight && dataService.activeDataHighlight.name !== 'None'" 
        class="map-legend" 
        [style.background]="getLegendGradient()"
      >
          <span class="legend-start">{{legend[1][0]}}</span>
          <span class="legend-end">{{legend[legend.length - 1][0]}}</span>
      </div>
      <app-ui-hint 
          *ngIf="dataService.activeDataHighlight && dataService.activeDataHighlight.name !== 'None'"
          class="legend-hint"
          [hint]="'The colored ' + dataService.activeDataLevel['name'] + ' on the map represent ' + dataService.activeDataHighlight['name'] + ' from ' + legend[1][0] + ' to ' + legend[legend.length - 1][0] + '.'" 
          placement="bottom"
      ></app-ui-hint>
  </div>
  <div class="year-slider-container">
    <app-ui-slider tabindex="9"
      class="year-slider"
      [currentValue]="dataService.activeYear" 
      [min]="1990" 
      [max]="2016" 
      (change)="setDataYear($event)"
    ></app-ui-slider>
  </div>
  
</div>